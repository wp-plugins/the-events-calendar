var tribe_events_bar_action;
(function(s,m,a,f,g,t,c,h,l){l&&(a().bootstrapDatepicker||debug.warn("TEC Debug: vendor bootstrapDatepicker was not loaded before its dependant file tribe-events-bar.js"),a().placeholder||debug.warn("TEC Debug: vendor placeholder was not loaded before its dependant file tribe-events-bar.js"),a().select2||debug.warn("TEC Debug: vendor select2 was not loaded before its dependant file tribe-events-bar.js"));a(m).ready(function(){function n(a){if(!a.parents(".tribe-bar-disabled").length){var c=a.width();
800<c?a.removeClass("tribe-bar-mini tribe-bar-collapse").addClass("tribe-bar-full"):a.removeClass("tribe-bar-full").addClass("tribe-bar-mini");670>c?a.removeClass("tribe-bar-mini").addClass("tribe-bar-collapse"):a.removeClass("tribe-bar-collapse")}}function p(){tribe_events_bar_action="change_view";if("month"===c.view&&d.length){var b=d.val();7===b.length&&d.val(b+t.get_day())}c.url_params={};a(g).trigger("tribe_ev_preCollectBarParams");a("#tribe-bar-form input").each(function(){var b=a(this);b.val().length&&
!b.hasClass("tribe-no-param")&&(b.is(":checkbox")?b.is(":checked")&&(c.url_params[b.attr("name")]=b.val()):c.url_params[b.attr("name")]=b.val())});c.url_params=a.param(c.url_params);a(g).trigger("tribe_ev_postCollectBarParams");c.url_params.length&&(c.cur_url+=h.starting_delim()+c.url_params);s.location.href=c.cur_url}var e=a("#tribe-bar-form"),d=a("#tribe-bar-date");$tribebarselect=a("select[name=tribe-bar-view]");n(e);e.resize(function(){n(e)});if(!a(".tribe-events-week-grid").length&&(!a(".events-gridview").length||
h.map_view())){l&&debug.info('TEC Debug: bootstrapDatepicker was just initialized in "tribe-events-bar.js" on:',d);var u=d.bootstrapDatepicker({format:"yyyy-mm-dd",showAnim:"fadeIn"}).on("changeDate",function(){u.hide()}).data("datepicker")}d.blur(function(){""===d.val()&&(a(".datepicker.dropdown-menu").is(":hidden")&&h.live_ajax()&&h.pushstate)&&(c.date=f.cur_date,f.cur_url=f.base_url,a(g).trigger("tribe_ev_runAjax"))});a(".tribe-bar-settings").length&&a("#tribe-events-bar").addClass("tribe-has-settings");
a("#tribe-events-bar .hasDatepicker").length&&a("#tribe-events-bar").addClass("tribe-has-datepicker");a('input[name*="tribe-bar-"]').placeholder();a('<ul class="tribe-bar-views-list" />').insertAfter($tribebarselect);var q=a(".tribe-bar-views-list");$tribebarselect.find("option").each(function(b){view=this;a("<li></li>",{"class":"tribe-bar-views-option","data-tribe-bar-order":b,"data-view":a(view).data("view")}).html(['   <a href="#" onclick="return false;">','   <span class="tribe-icon-'+a.trim(view.text.toLowerCase())+
'">'+view.text+"</span>","</a>"].join("")).appendTo(".tribe-bar-views-list")});var v=$tribebarselect.find(":selected").data("view");$selectedListItem=q.find("li[data-view="+v+"]");$selectedListItem.prependTo(q).addClass("tribe-bar-active");e.on("click","#tribe-bar-views",function(b){b.stopPropagation();a(this).toggleClass("tribe-bar-views-open")});e.on("click",".tribe-bar-views-option",function(b){b=a(this);b.is(".tribe-bar-active")||($currentView=a(".tribe-bar-active"),currentViewOrder=$currentView.data("tribe-bar-order"),
moveCurrentTo=currentViewOrder-1,$currentView.removeClass("tribe-bar-active").insertAfter("li[data-tribe-bar-order="+moveCurrentTo+"]"),b.prependTo("ul.tribe-bar-views-list").addClass("tribe-bar-active"),newView=b.data("view"),a("option:selected",$tribebarselect).removeAttr("selected"),a("option[data-view="+newView+"]").attr("selected",!0),$tribebarselect.change())});e.is(".tribe-bar-mini");e.on("click","#tribe-bar-collapse-toggle",function(){a(this).toggleClass("tribe-bar-filters-open");a(".tribe-bar-filters").slideToggle("fast")});
a("body").on("click",function(){a("#tribe-bar-views").removeClass("tribe-bar-views-closed")});a('label[for="tribe-bar-date"], input[name="tribe-bar-date"]').wrapAll('<div id="tribe-bar-dates" />');a("#tribe-bar-filters").before(a("#tribe-bar-dates"));$tribebarselect.change(function(){c.cur_url=a(this).val();c.view_target=a('select[name=tribe-bar-view] option[value="'+c.cur_url+'"]').data("view");tribe_events_bar_action="change_view";p()});a("a.tribe-bar-view").on("click",function(b){b.preventDefault();
b=a(this);var c=b.data("view");p(b.attr("href"),c)});a(g).on("tribe_ev_serializeBar",function(){a("form#tribe-bar-form input, #tribeHideRecurrence").each(function(){var b=a(this);b.is("#tribe-bar-date")&&(b.val().length?(c.params[b.attr("name")]=b.val(),c.url_params[b.attr("name")]=b.val()):c.date=f.cur_date);!b.val().length||(b.hasClass("tribe-no-param")||b.is("#tribe-bar-date"))||(b.is(":checkbox")?b.is(":checked")&&(c.params[b.attr("name")]=b.val(),"map"!==c.view&&(c.url_params[b.attr("name")]=
b.val()),("month"===c.view||"day"===c.view||"week"===c.view||c.recurrence)&&c.pushcount++):(c.params[b.attr("name")]=b.val(),"map"!==c.view&&(c.url_params[b.attr("name")]=b.val()),"month"!==c.view&&"day"!==c.view&&"week"!==c.view||c.pushcount++))})});var k=a('#tribe-events-bar [class^="tribe-bar-button-"]'),r=k.next(".tribe-bar-drop-content");k.click(function(){var b=a(this);b.toggleClass("open");b.next(".tribe-bar-drop-content").toggle();return!1});a(m).click(function(){k.hasClass("open")&&(k.removeClass("open"),
r.hide())});r.click(function(a){a.stopPropagation()});l&&debug.info("TEC Debug: tribe-events-bar.js successfully loaded")})})(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);
